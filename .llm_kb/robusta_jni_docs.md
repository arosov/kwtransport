[INIT].... → Crawl4AI 0.8.0 
<!-- SOURCE: https://docs.rs/robusta_jni/latest/robusta_jni/#getting-started -->
[ Docs.rs ](https://docs.rs/)
  * [ robusta_jni-0.2.2 ](https://docs.rs/robusta_jni/latest/robusta_jni/ "Easy interop between Rust and Java")
    * robusta_jni 0.2.2 
    * [](https://docs.rs/robusta_jni/0.2.2/robusta_jni/ "Get a link to this specific version")
    * [ ](https://docs.rs/crate/robusta_jni/latest "See robusta_jni in docs.rs")
    * [MIT](https://spdx.org/licenses/MIT)
    * Links
    * [ ](https://github.com/giovanniberti/robusta)
    * [ ](https://crates.io/crates/robusta_jni "See robusta_jni in crates.io")
    * [ ](https://docs.rs/crate/robusta_jni/latest/source/ "Browse source of robusta_jni-0.2.2")
    * Owners
    * [ ](https://crates.io/users/giovanniberti)
    * Dependencies
    *       * [ jni ^0.19.0 _normal_ ](https://docs.rs/jni/^0.19.0/)
      * [ paste ^1 _normal_ ](https://docs.rs/paste/^1/)
      * [ robusta-codegen ^0.2 _normal_ ](https://docs.rs/robusta-codegen/^0.2/)
      * [ static_assertions ^1 _normal_ ](https://docs.rs/static_assertions/^1/)
      * [ jni ^0.19.0 _dev_ ](https://docs.rs/jni/^0.19.0/)
    * Versions
    * [ **71.43%** of the crate is documented ](https://docs.rs/crate/robusta_jni/latest)
  * [ Platform ](https://docs.rs/robusta_jni/latest/robusta_jni/)
    * [aarch64-apple-darwin](https://docs.rs/crate/robusta_jni/latest/target-redirect/aarch64-apple-darwin/robusta_jni/)
    * [aarch64-unknown-linux-gnu](https://docs.rs/crate/robusta_jni/latest/target-redirect/aarch64-unknown-linux-gnu/robusta_jni/)
    * [i686-pc-windows-msvc](https://docs.rs/crate/robusta_jni/latest/target-redirect/i686-pc-windows-msvc/robusta_jni/)
    * [x86_64-pc-windows-msvc](https://docs.rs/crate/robusta_jni/latest/target-redirect/x86_64-pc-windows-msvc/robusta_jni/)
    * [x86_64-unknown-linux-gnu](https://docs.rs/crate/robusta_jni/latest/target-redirect/robusta_jni/)
  * [ Feature flags ](https://docs.rs/crate/robusta_jni/latest/features "Browse available feature flags of robusta_jni-0.2.2")


  * [docs.rs](https://docs.rs/robusta_jni/latest/robusta_jni/)
    * [](https://docs.rs/about)
    * [](https://docs.rs/about/badges)
    * [](https://docs.rs/about/builds)
    * [](https://docs.rs/about/metadata)
    * [](https://docs.rs/about/redirections)
    * [](https://docs.rs/about/download)
    * [](https://docs.rs/about/rustdoc-json)
    * [](https://docs.rs/releases/queue)
    * [](https://foundation.rust-lang.org/policies/privacy-policy/#docs.rs)


  * [Rust](https://docs.rs/robusta_jni/latest/robusta_jni/)
    * [Rust website](https://www.rust-lang.org/)
    * [The Book](https://doc.rust-lang.org/book/)
    * [Standard Library API Reference](https://doc.rust-lang.org/std/)
    * [Rust by Example](https://doc.rust-lang.org/rust-by-example/)
    * [The Cargo Guide](https://doc.rust-lang.org/cargo/guide/)
    * [Clippy Documentation](https://doc.rust-lang.org/nightly/clippy)


[Settings](https://docs.rs/robusta_jni/latest/settings.html)
[Help](https://docs.rs/robusta_jni/latest/help.html)
## [Crate robusta_jni](https://docs.rs/robusta_jni/latest/robusta_jni/)
##  [robusta_jni](https://docs.rs/robusta_jni/latest/robusta_jni/index.html)0.2.2
  * [All Items](https://docs.rs/robusta_jni/latest/robusta_jni/all.html)


### [Sections](https://docs.rs/robusta_jni/latest/robusta_jni/)
  * [Getting started](https://docs.rs/robusta_jni/latest/robusta_jni/#getting-started "Getting started")
  * [Declaring classes](https://docs.rs/robusta_jni/latest/robusta_jni/#declaring-classes "Declaring classes")
  * [Adding native methods](https://docs.rs/robusta_jni/latest/robusta_jni/#adding-native-methods "Adding native methods")
  * [Adding Java methods](https://docs.rs/robusta_jni/latest/robusta_jni/#adding-java-methods "Adding Java methods")
    * [Static methods](https://docs.rs/robusta_jni/latest/robusta_jni/#static-methods "Static methods")
    * [Non-static methods](https://docs.rs/robusta_jni/latest/robusta_jni/#non-static-methods "Non-static methods")
    * [Constructors](https://docs.rs/robusta_jni/latest/robusta_jni/#constructors "Constructors")
  * [Conversion details and special lifetimes](https://docs.rs/robusta_jni/latest/robusta_jni/#conversion-details-and-special-lifetimes "Conversion details and special lifetimes")
    * [Raising exceptions](https://docs.rs/robusta_jni/latest/robusta_jni/#raising-exceptions "Raising exceptions")
    * [Library-provided conversions](https://docs.rs/robusta_jni/latest/robusta_jni/#library-provided-conversions "Library-provided conversions")
    * [Limitations](https://docs.rs/robusta_jni/latest/robusta_jni/#limitations "Limitations")


### [Crate Items](https://docs.rs/robusta_jni/latest/robusta_jni/#reexports)
  * [Re-exports](https://docs.rs/robusta_jni/latest/robusta_jni/#reexports "Re-exports")
  * [Modules](https://docs.rs/robusta_jni/latest/robusta_jni/#modules "Modules")
  * [Macros](https://docs.rs/robusta_jni/latest/robusta_jni/#macros "Macros")
  * [Attribute Macros](https://docs.rs/robusta_jni/latest/robusta_jni/#attributes "Attribute Macros")


### Crates
  * [robusta_jni](https://docs.rs/robusta_jni/latest/robusta_jni/index.html)


[](https://docs.rs/robusta_jni/latest/robusta_jni/all.html "show sidebar")
# Crate robusta_jni Copy item path
[Source](https://docs.rs/robusta_jni/latest/src/robusta_jni/lib.rs.html#1-279)
[Search](https://docs.rs/robusta_jni/latest/robusta_jni/?search=)
[Settings](https://docs.rs/robusta_jni/latest/settings.html)
[Help](https://docs.rs/robusta_jni/latest/help.html)
Summary
Expand description
`robusta_jni` is a library that provides a procedural macro to make easier to write JNI-compatible code in Rust.
It can perform automatic conversion of Rust-y input and output types.
```
[dependencies]
robusta_jni = "0.2"
```

##  [§](https://docs.rs/robusta_jni/latest/robusta_jni/#getting-started)Getting started
The [`#[bridge]`](https://docs.rs/robusta_jni/latest/robusta_jni/attr.bridge.html "attr robusta_jni::bridge") attribute is `robusta_jni`’s entry point. It must be applied to a module. `robusta_jni` will then generate proper function definitions and trait implementations depending on declared methods.
##  [§](https://docs.rs/robusta_jni/latest/robusta_jni/#declaring-classes)Declaring classes
Rust counterparts of Java classes are declared as Rust `struct`s, with a `#[package(my.package.name)]` attribute. When using the default package, just omit the package name inside parentheses.
Structs without the package attribute will be ignored by `robusta_jni`.
In order to use the features of `robusta_jni`, declared structs should also implement the [`Signature`](https://docs.rs/robusta_jni/latest/robusta_jni/convert/trait.Signature.html "trait robusta_jni::convert::Signature") trait. This can be done manually or with autoderive.
Example:
```
use robusta_jni::bridge;
use robusta_jni::convert::Signature;

#[bridge]
mod jni {
    #[package()] // default package
    struct A;

    impl Signature for A {
        const SIG_TYPE: &'static str = "LA;";
    }

    #[derive(Signature)]
    #[package(my.awesome.package)]
    struct B;
}
```

##  [§](https://docs.rs/robusta_jni/latest/robusta_jni/#adding-native-methods)Adding native methods
JNI bindings are generated for every method implemented for `package`-annotated structs. Each method can optionally specify a `#[call_type]` attribute that will determine how conversions between Rust and Java types are performed. For more information about conversions and `#[call_type]`, check out the [convert](https://docs.rs/robusta_jni/latest/robusta_jni/convert/index.html "mod robusta_jni::convert") module.
In general, **all input and output types must implement proper conversion traits** (input types must implement `(Try)FromJavaValue` and output types must implement `(Try)IntoJavaValue`)
Native methods can optionally accept a [`JNIEnv`](https://docs.rs/jni/0.19.0/x86_64-unknown-linux-gnu/jni/wrapper/jnienv/struct.JNIEnv.html "struct jni::wrapper::jnienv::JNIEnv") parameter as first parameter (after `self` if present).
Methods are declared as standard Rust functions with public visibility and “jni” ABI, and are matched by name with Java methods. No special handling is needed.
Example:
```
impl A {
    pub extern "jni" fn op(self, _env: &JNIEnv, flag: bool) -> i32 {
        //                       ^^^^^ optional
        if flag {
            1
        } else {
            0
        }
    }

    // here the `env` parameter is omitted
    pub extern "jni" fn special(mut input1: Vec<i32>, input2: i32) -> Vec<String> {
        input1.push(input2);
        input1.iter().map(ToString::to_string).collect()
    }

}
```

##  [§](https://docs.rs/robusta_jni/latest/robusta_jni/#adding-java-methods)Adding Java methods
You can also declare Java methods and `robusta` will generate binding glue to convert types and call methods on the Java side. Again, **all input and output types must implement proper conversion traits** : in this case it’s the reverse from the Java to Rust case (input types must implement `(Try)IntoJavaValue` and output types must implement `(Try)FromJavaValue`).
Methods are declared as standard Rust functions with public visibility, a “java” ABI and an empty body, and are matched by name with Java methods. Both static and non-static methods must accept a [`JNIEnv`](https://docs.rs/jni/0.19.0/x86_64-unknown-linux-gnu/jni/wrapper/jnienv/struct.JNIEnv.html "struct jni::wrapper::jnienv::JNIEnv") parameter as first parameter (after self if present).
Constructors can be declared via a `#[constructor]` attribute on static methods, and are matched by their type signature.
When using `#[call_type(safe)]` or omitting `call_type` attribute, the output type **must** be [`jni::errors::Result<T>`](https://docs.rs/jni/0.19.0/x86_64-unknown-linux-gnu/jni/wrapper/errors/type.Result.html "type jni::wrapper::errors::Result") with `T` being the actual method return type. Otherwise when using `#[call_type(unchecked)]` `T` is sufficient.
**When using`#[call_type(unchecked)]` if a Java exception is thrown while calling a method a panic is raised.**
###  [§](https://docs.rs/robusta_jni/latest/robusta_jni/#static-methods)Static methods
Example:
```
impl A {
    pub extern "java" fn staticJavaMethod(
        env: &JNIEnv,
        i: i32,
        u: i32,
    ) -> ::robusta_jni::jni::errors::Result<i32> {}
}
```

###  [§](https://docs.rs/robusta_jni/latest/robusta_jni/#non-static-methods)Non-static methods
Example:
```
impl A {
    pub extern "java" fn selfMethod(
        &self,
        env: &JNIEnv,
        i: i32,
        u: i32,
    ) -> ::robusta_jni::jni::errors::Result<i32> {}
}
```

###  [§](https://docs.rs/robusta_jni/latest/robusta_jni/#constructors)Constructors
Example:
```
impl A {
    #[constructor]  //   vvv ---- this method name can be anything because it's a constructor
    pub extern "java" fn new(
        env: &JNIEnv
    ) -> ::robusta_jni::jni::errors::Result<Self> {}
}
```

##  [§](https://docs.rs/robusta_jni/latest/robusta_jni/#conversion-details-and-special-lifetimes)Conversion details and special lifetimes
The procedural macro handles two special lifetimes specially: `'env` and `'borrow`.
When declaring structs with lifetimes you may be asked to name one of the lifetimes as `'env` in order to disambiguate code generation for the attribute macro. In the generated code, this lifetime would correspond to the one used to convert your type to `*IntoJavaValue`, like:
[ⓘ](https://docs.rs/robusta_jni/latest/robusta_jni/ "This example is not tested")```
<A<'env> as TryIntoJavaValue<'env>>
```

This lifetime is always used as the lifetime parameter of `JNIEnv` instances.
When using `*FromJavaValue` derive macros your structs will be required to have both `'env` and `'borrow`, with the same bounds as in the trait definition. For more information, see the relevant traits documentation.
###  [§](https://docs.rs/robusta_jni/latest/robusta_jni/#raising-exceptions)Raising exceptions
You can make a Rust native method raise a Java exception simply by returning a [`jni::errors::Result`](https://docs.rs/jni/0.19.0/x86_64-unknown-linux-gnu/jni/wrapper/errors/type.Result.html "type jni::wrapper::errors::Result") with an `Err` variant. See the [`convert`](https://docs.rs/robusta_jni/latest/robusta_jni/convert/index.html "mod robusta_jni::convert") module documentation for more information.
###  [§](https://docs.rs/robusta_jni/latest/robusta_jni/#library-provided-conversions)Library-provided conversions
**Rust** | **Java**  
---|---  
i32 | int  
bool | boolean  
char | char  
i8 | byte  
f32 | float  
f64 | double  
i64 | long  
i16 | short  
String | String  
Vec<T>† | ArrayList<T>  
[jni::JObject<’env>](https://docs.rs/jni/0.19.0/x86_64-unknown-linux-gnu/jni/wrapper/objects/jobject/struct.JObject.html "struct jni::wrapper::objects::jobject::JObject") ‡ | _(any Java object as input type)_  
[jni::jobject](https://docs.rs/jni-sys/0.3.0/x86_64-unknown-linux-gnu/jni_sys/type.jobject.html "type jni_sys::jobject") | _(any Java object as output)_  
† Type parameter `T` must implement proper conversion types
‡ The special `'env` lifetime **must** be used
###  [§](https://docs.rs/robusta_jni/latest/robusta_jni/#limitations)Limitations
Currently there are some limitations in the conversion mechanism:
  * Boxed types are supported only through the opaque `JObject`/`jobject` types
  * Automatic type conversion is limited to the table outlined above, though easily extendable if needed.


## Re-exports[§](https://docs.rs/robusta_jni/latest/robusta_jni/#reexports) 

`pub use jni[](https://docs.rs/jni/0.19.0/x86_64-unknown-linux-gnu/jni/index.html "mod jni");`

## Modules[§](https://docs.rs/robusta_jni/latest/robusta_jni/#modules) 

[convert](https://docs.rs/robusta_jni/latest/robusta_jni/convert/index.html "mod robusta_jni::convert")
    Conversion facilities. This module provides two trait families: [FromJavaValue](https://docs.rs/robusta_jni/latest/robusta_jni/convert/unchecked/trait.FromJavaValue.html "trait robusta_jni::convert::unchecked::FromJavaValue")/[IntoJavaValue](https://docs.rs/robusta_jni/latest/robusta_jni/convert/unchecked/trait.IntoJavaValue.html "trait robusta_jni::convert::unchecked::IntoJavaValue") (infallible conversions) and [TryFromJavaValue](https://docs.rs/robusta_jni/latest/robusta_jni/convert/safe/trait.TryFromJavaValue.html "trait robusta_jni::convert::safe::TryFromJavaValue")/[TryIntoJavaValue](https://docs.rs/robusta_jni/latest/robusta_jni/convert/safe/trait.TryIntoJavaValue.html "trait robusta_jni::convert::safe::TryIntoJavaValue") (fallible conversions), similar to the ones found in the standard library.
## Macros[§](https://docs.rs/robusta_jni/latest/robusta_jni/#macros) 

[assert_type_eq_all](https://docs.rs/robusta_jni/latest/robusta_jni/macro.assert_type_eq_all.html "macro robusta_jni::assert_type_eq_all")
    Asserts that _all_ types in a list are equal to each other.
## Attribute Macros[§](https://docs.rs/robusta_jni/latest/robusta_jni/#attributes) 

[bridge](https://docs.rs/robusta_jni/latest/robusta_jni/attr.bridge.html "attr robusta_jni::bridge")



---


