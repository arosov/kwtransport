[INIT].... → Crawl4AI 0.8.0 
<!-- SOURCE: https://mozilla.github.io/uniffi-rs/latest/kotlin/configuration.html -->
[ Skip to content ](https://mozilla.github.io/uniffi-rs/latest/kotlin/configuration.html#configuration)
[ ](https://mozilla.github.io/uniffi-rs/latest/index.html "The UniFFI user guide")
The UniFFI user guide 
0.31
  * [next](https://mozilla.github.io/uniffi-rs/next/)
  * [0.31](https://mozilla.github.io/uniffi-rs/0.31/)
  * [0.30](https://mozilla.github.io/uniffi-rs/0.30/)
  * [0.29](https://mozilla.github.io/uniffi-rs/0.29/)
  * [0.28](https://mozilla.github.io/uniffi-rs/0.28/)
  * [0.27](https://mozilla.github.io/uniffi-rs/0.27/)


Configuration 
Initializing search 
[ GitHub  ](https://github.com/mozilla/uniffi-rs "Go to repository")
[ ](https://mozilla.github.io/uniffi-rs/latest/index.html "The UniFFI user guide") The UniFFI user guide 
[ GitHub  ](https://github.com/mozilla/uniffi-rs "Go to repository")
  * [ UniFFI  ](https://mozilla.github.io/uniffi-rs/latest/index.html)
  * [ Motivation  ](https://mozilla.github.io/uniffi-rs/latest/Motivation.html)
  * Tutorial 
    * [ Getting started  ](https://mozilla.github.io/uniffi-rs/latest/Getting_started.html)
    * [ Prerequisites  ](https://mozilla.github.io/uniffi-rs/latest/tutorial/Prerequisites.html)
    * [ Describing the interface  ](https://mozilla.github.io/uniffi-rs/latest/tutorial/udl_file.html)
    * [ Rust scaffolding  ](https://mozilla.github.io/uniffi-rs/latest/tutorial/Rust_scaffolding.html)
    * [ Foreign-language bindings  ](https://mozilla.github.io/uniffi-rs/latest/tutorial/foreign_language_bindings.html)
  * UniFFI type model 
    * [ Namespace  ](https://mozilla.github.io/uniffi-rs/latest/types/namespace.html)
    * [ Built-in types  ](https://mozilla.github.io/uniffi-rs/latest/types/builtin_types.html)
    * [ Enumerations  ](https://mozilla.github.io/uniffi-rs/latest/types/enumerations.html)
    * [ Records  ](https://mozilla.github.io/uniffi-rs/latest/types/records.html)
    * Functions 
      * [ Functions  ](https://mozilla.github.io/uniffi-rs/latest/types/functions.html)
      * [ Throwing errors  ](https://mozilla.github.io/uniffi-rs/latest/types/errors.html)
    * [ Interfaces, Objects and Traits  ](https://mozilla.github.io/uniffi-rs/latest/types/interfaces.html)
    * [ Callback interfaces  ](https://mozilla.github.io/uniffi-rs/latest/types/callback_interfaces.html)
    * [ Remote and External types  ](https://mozilla.github.io/uniffi-rs/latest/types/remote_ext_types.html)
    * [ Custom types  ](https://mozilla.github.io/uniffi-rs/latest/types/custom_types.html)
    * [ Default values  ](https://mozilla.github.io/uniffi-rs/latest/types/defaults.html)
    * [ Exposing standard Rust traits  ](https://mozilla.github.io/uniffi-rs/latest/types/uniffi_traits.html)
  * Describing the interface 
    * [ Describing the interface  ](https://mozilla.github.io/uniffi-rs/latest/describing.html)
    * UDL Files 
      * [ The UDL file  ](https://mozilla.github.io/uniffi-rs/latest/udl/index.html)
      * [ Enums in UDL  ](https://mozilla.github.io/uniffi-rs/latest/udl/enumerations.html)
      * [ Errors in UDL  ](https://mozilla.github.io/uniffi-rs/latest/udl/errors.html)
      * [ Functions in UDL  ](https://mozilla.github.io/uniffi-rs/latest/udl/functions.html)
      * [ Interfaces in UDL  ](https://mozilla.github.io/uniffi-rs/latest/udl/interfaces.html)
      * [ Records in UDL  ](https://mozilla.github.io/uniffi-rs/latest/udl/records.html)
      * [ Using types defined outside a UDL.  ](https://mozilla.github.io/uniffi-rs/latest/udl/external_types.html)
      * [ Docstrings  ](https://mozilla.github.io/uniffi-rs/latest/udl/docstrings.html)
    * Proc macros 
      * [ Procedural Macros: Attributes and Derives  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/index.html)
      * [ Enumerations  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/enumerations.html)
      * [ The uniffi::Error derive  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/errors.html)
      * [ Functions, Constructors, Methods  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/functions.html)
      * [ The uniffi::Object derive  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/interfaces.html)
      * [ The uniffi::Record derive  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/records.html)
      * [ Renaming via proc-macros  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/renaming.html)
      * [ Docstrings  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/docstrings.html)
    * [ Renaming  ](https://mozilla.github.io/uniffi-rs/latest/renaming.html)
  * [ Async/Future support  ](https://mozilla.github.io/uniffi-rs/latest/futures.html)
  * Bindings 
    * [ Generating bindings  ](https://mozilla.github.io/uniffi-rs/latest/bindings.html)
    * [ Foreign traits  ](https://mozilla.github.io/uniffi-rs/latest/foreign_traits.html)
    * Kotlin 
      * Configuration  [ Configuration  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/configuration.html)
        * [ Available options  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/configuration.html#available-options)
        * [ Example  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/configuration.html#example)
      * [ Integrating with Gradle  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/gradle.html)
      * [ Kotlin Lifetimes  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/lifetimes.html)
    * Swift 
      * [ Swift Bindings  ](https://mozilla.github.io/uniffi-rs/latest/swift/overview.html)
      * [ uniffi-bindgen-swift  ](https://mozilla.github.io/uniffi-rs/latest/swift/uniffi-bindgen-swift.html)
      * [ Configuration  ](https://mozilla.github.io/uniffi-rs/latest/swift/configuration.html)
      * [ Compiling a Swift module  ](https://mozilla.github.io/uniffi-rs/latest/swift/module.html)
      * [ Integrating with Xcode  ](https://mozilla.github.io/uniffi-rs/latest/swift/xcode.html)
    * [ Python  ](https://mozilla.github.io/uniffi-rs/latest/python/configuration.html)
    * WASM 
      * [ WASM  ](https://mozilla.github.io/uniffi-rs/latest/wasm/configuration.html)
  * Internals 
    * [ Design Principles  ](https://mozilla.github.io/uniffi-rs/latest/internals/design_principles.html)
    * [ Navigating the code  ](https://mozilla.github.io/uniffi-rs/latest/internals/crates.html)
    * [ UniFFI Glossary  ](https://mozilla.github.io/uniffi-rs/latest/glossary.html)
    * [ Lifting, Lowering and Serialization  ](https://mozilla.github.io/uniffi-rs/latest/internals/lifting_and_lowering.html)
    * [ Ffi converter traits  ](https://mozilla.github.io/uniffi-rs/latest/internals/ffi_converter_traits.html)
    * [ Foreign -> Rust calls  ](https://mozilla.github.io/uniffi-rs/latest/internals/rust_calls.html)
    * [ Rust -> Foreign calls  ](https://mozilla.github.io/uniffi-rs/latest/internals/foreign_calls.html)
    * [ Managing Object References  ](https://mozilla.github.io/uniffi-rs/latest/internals/object_references.html)
    * [ UniFFI Async Overview  ](https://mozilla.github.io/uniffi-rs/latest/internals/async-overview.html)
    * [ UniFFI Async FFI details  ](https://mozilla.github.io/uniffi-rs/latest/internals/async-ffi.html)
    * [ Rendering Foreign Bindings  ](https://mozilla.github.io/uniffi-rs/latest/internals/rendering_foreign_bindings.html)
    * [ The UniFFI Bindings IR  ](https://mozilla.github.io/uniffi-rs/latest/internals/bindings_ir.html)
    * [ Bindings IR Pipeline  ](https://mozilla.github.io/uniffi-rs/latest/internals/bindings_ir_pipeline.html)
  * [ Upgrading v0.28.x -> v0.29.x  ](https://mozilla.github.io/uniffi-rs/latest/Upgrading.html)


  * [ Available options  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/configuration.html#available-options)
  * [ Example  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/configuration.html#example)


# Configuration
The generated Kotlin modules can be configured using a `uniffi.toml` configuration file.
## Available options
Configuration name | Default | Description  
---|---|---  
`package_name` | `uniffi` | The Kotlin package name - ie, the value used in the `package` statement at the top of generated files.  
`cdylib_name` |  `uniffi_{namespace}`[^1] | The name of the compiled Rust library containing the FFI implementation (not needed when using `generate --library`).  
`generate_immutable_records` | `false` | Whether to generate records with immutable fields (`val` instead of `var`).  
`custom_types` |  | A map which controls how custom types are exposed to Kotlin. See the [custom types section of the manual](https://mozilla.github.io/uniffi-rs/latest/types/custom_types.html#custom-types-in-the-bindings-code)  
`external_packages` |  | A map of packages to be used for the specified external crates. The key is the Rust crate name, the value is the Kotlin package which will be used referring to types in that crate. See the [external types section of the manual](https://mozilla.github.io/uniffi-rs/latest/types/remote_ext_types.html#kotlin)  
`rename` |  | A map to rename types, functions, methods, and their members in the generated Kotlin bindings. See the [renaming section](https://mozilla.github.io/uniffi-rs/latest/renaming.html).  
`android` | `false` | Used to toggle on Android specific optimizations  
`android_cleaner` | `android` | Use the [`android.system.SystemCleaner`](https://developer.android.com/reference/android/system/SystemCleaner) instead of [`java.lang.ref.Cleaner`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ref/Cleaner.html). Fallback in both instances is the one shipped with JNA.  
`kotlin_target_version` | `"x.y.z"` | When provided, it will enable features in the bindings supported for this version. The build process will fail if an invalid format is used.  
`disable_java_cleaner` | `false` | Will disable use of `java.lang.ref.Cleaner` so generated code can be compatible with Java 8.  
`omit_checksums` | `false` | Whether to omit checking the library checksums as the library is initialized. Changing this will shoot yourself in the foot if you mixup your build pipeline in any way, but might speed up initialization.  
## Example
Custom types 
```
# Assuming a Custom Type named URL using a String as the builtin.
[bindings.kotlin.custom_types.Url]
# Name of the type in the Kotlin code
type_name = "URL"
# Classes that need to be imported
imports = [ "java.net.URI", "java.net.URL" ]
# Functions to convert between strings and URLs
into_custom = "URI({}).toURL()"
from_custom = "{}.toString()"

```

External types 
```
[bindings.kotlin.external_packages]
# This specifies that external types from the crate `rust-crate-name` will be referred by by the package `"kotlin.package.name`.
rust-crate-name = "kotlin.package.name"

```

Made with [ Material for MkDocs ](https://squidfunk.github.io/mkdocs-material/)


---


[INIT].... → Crawl4AI 0.8.0 
<!-- SOURCE: https://mozilla.github.io/uniffi-rs/latest/kotlin/gradle.html -->
[ Skip to content ](https://mozilla.github.io/uniffi-rs/latest/kotlin/gradle.html#integrating-with-gradle)
[ ](https://mozilla.github.io/uniffi-rs/latest/index.html "The UniFFI user guide")
The UniFFI user guide 
0.31
  * [next](https://mozilla.github.io/uniffi-rs/next/)
  * [0.31](https://mozilla.github.io/uniffi-rs/0.31/)
  * [0.30](https://mozilla.github.io/uniffi-rs/0.30/)
  * [0.29](https://mozilla.github.io/uniffi-rs/0.29/)
  * [0.28](https://mozilla.github.io/uniffi-rs/0.28/)
  * [0.27](https://mozilla.github.io/uniffi-rs/0.27/)


Integrating with Gradle 
Type to start searching
[ GitHub 
  * 4.3k
  * 297

](https://github.com/mozilla/uniffi-rs "Go to repository")
[ ](https://mozilla.github.io/uniffi-rs/latest/index.html "The UniFFI user guide") The UniFFI user guide 
[ GitHub 
  * 4.3k
  * 297

](https://github.com/mozilla/uniffi-rs "Go to repository")
  * [ UniFFI  ](https://mozilla.github.io/uniffi-rs/latest/index.html)
  * [ Motivation  ](https://mozilla.github.io/uniffi-rs/latest/Motivation.html)
  * Tutorial 
    * [ Getting started  ](https://mozilla.github.io/uniffi-rs/latest/Getting_started.html)
    * [ Prerequisites  ](https://mozilla.github.io/uniffi-rs/latest/tutorial/Prerequisites.html)
    * [ Describing the interface  ](https://mozilla.github.io/uniffi-rs/latest/tutorial/udl_file.html)
    * [ Rust scaffolding  ](https://mozilla.github.io/uniffi-rs/latest/tutorial/Rust_scaffolding.html)
    * [ Foreign-language bindings  ](https://mozilla.github.io/uniffi-rs/latest/tutorial/foreign_language_bindings.html)
  * UniFFI type model 
    * [ Namespace  ](https://mozilla.github.io/uniffi-rs/latest/types/namespace.html)
    * [ Built-in types  ](https://mozilla.github.io/uniffi-rs/latest/types/builtin_types.html)
    * [ Enumerations  ](https://mozilla.github.io/uniffi-rs/latest/types/enumerations.html)
    * [ Records  ](https://mozilla.github.io/uniffi-rs/latest/types/records.html)
    * Functions 
      * [ Functions  ](https://mozilla.github.io/uniffi-rs/latest/types/functions.html)
      * [ Throwing errors  ](https://mozilla.github.io/uniffi-rs/latest/types/errors.html)
    * [ Interfaces, Objects and Traits  ](https://mozilla.github.io/uniffi-rs/latest/types/interfaces.html)
    * [ Callback interfaces  ](https://mozilla.github.io/uniffi-rs/latest/types/callback_interfaces.html)
    * [ Remote and External types  ](https://mozilla.github.io/uniffi-rs/latest/types/remote_ext_types.html)
    * [ Custom types  ](https://mozilla.github.io/uniffi-rs/latest/types/custom_types.html)
    * [ Default values  ](https://mozilla.github.io/uniffi-rs/latest/types/defaults.html)
    * [ Exposing standard Rust traits  ](https://mozilla.github.io/uniffi-rs/latest/types/uniffi_traits.html)
  * Describing the interface 
    * [ Describing the interface  ](https://mozilla.github.io/uniffi-rs/latest/describing.html)
    * UDL Files 
      * [ The UDL file  ](https://mozilla.github.io/uniffi-rs/latest/udl/index.html)
      * [ Enums in UDL  ](https://mozilla.github.io/uniffi-rs/latest/udl/enumerations.html)
      * [ Errors in UDL  ](https://mozilla.github.io/uniffi-rs/latest/udl/errors.html)
      * [ Functions in UDL  ](https://mozilla.github.io/uniffi-rs/latest/udl/functions.html)
      * [ Interfaces in UDL  ](https://mozilla.github.io/uniffi-rs/latest/udl/interfaces.html)
      * [ Records in UDL  ](https://mozilla.github.io/uniffi-rs/latest/udl/records.html)
      * [ Using types defined outside a UDL.  ](https://mozilla.github.io/uniffi-rs/latest/udl/external_types.html)
      * [ Docstrings  ](https://mozilla.github.io/uniffi-rs/latest/udl/docstrings.html)
    * Proc macros 
      * [ Procedural Macros: Attributes and Derives  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/index.html)
      * [ Enumerations  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/enumerations.html)
      * [ The uniffi::Error derive  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/errors.html)
      * [ Functions, Constructors, Methods  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/functions.html)
      * [ The uniffi::Object derive  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/interfaces.html)
      * [ The uniffi::Record derive  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/records.html)
      * [ Renaming via proc-macros  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/renaming.html)
      * [ Docstrings  ](https://mozilla.github.io/uniffi-rs/latest/proc_macro/docstrings.html)
    * [ Renaming  ](https://mozilla.github.io/uniffi-rs/latest/renaming.html)
  * [ Async/Future support  ](https://mozilla.github.io/uniffi-rs/latest/futures.html)
  * Bindings 
    * [ Generating bindings  ](https://mozilla.github.io/uniffi-rs/latest/bindings.html)
    * [ Foreign traits  ](https://mozilla.github.io/uniffi-rs/latest/foreign_traits.html)
    * Kotlin 
      * [ Configuration  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/configuration.html)
      * Integrating with Gradle  [ Integrating with Gradle  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/gradle.html)
        * [ Using experimental unsigned types  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/gradle.html#using-experimental-unsigned-types)
        * [ Update  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/gradle.html#update)
        * [ JNA dependency  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/gradle.html#jna-dependency)
        * [ Advise on Rust -> Java interop  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/gradle.html#advise-on-rust-java-interop)
        * [ Coroutines dependency  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/gradle.html#coroutines-dependency)
      * [ Kotlin Lifetimes  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/lifetimes.html)
    * Swift 
      * [ Swift Bindings  ](https://mozilla.github.io/uniffi-rs/latest/swift/overview.html)
      * [ uniffi-bindgen-swift  ](https://mozilla.github.io/uniffi-rs/latest/swift/uniffi-bindgen-swift.html)
      * [ Configuration  ](https://mozilla.github.io/uniffi-rs/latest/swift/configuration.html)
      * [ Compiling a Swift module  ](https://mozilla.github.io/uniffi-rs/latest/swift/module.html)
      * [ Integrating with Xcode  ](https://mozilla.github.io/uniffi-rs/latest/swift/xcode.html)
    * [ Python  ](https://mozilla.github.io/uniffi-rs/latest/python/configuration.html)
    * WASM 
      * [ WASM  ](https://mozilla.github.io/uniffi-rs/latest/wasm/configuration.html)
  * Internals 
    * [ Design Principles  ](https://mozilla.github.io/uniffi-rs/latest/internals/design_principles.html)
    * [ Navigating the code  ](https://mozilla.github.io/uniffi-rs/latest/internals/crates.html)
    * [ UniFFI Glossary  ](https://mozilla.github.io/uniffi-rs/latest/glossary.html)
    * [ Lifting, Lowering and Serialization  ](https://mozilla.github.io/uniffi-rs/latest/internals/lifting_and_lowering.html)
    * [ Ffi converter traits  ](https://mozilla.github.io/uniffi-rs/latest/internals/ffi_converter_traits.html)
    * [ Foreign -> Rust calls  ](https://mozilla.github.io/uniffi-rs/latest/internals/rust_calls.html)
    * [ Rust -> Foreign calls  ](https://mozilla.github.io/uniffi-rs/latest/internals/foreign_calls.html)
    * [ Managing Object References  ](https://mozilla.github.io/uniffi-rs/latest/internals/object_references.html)
    * [ UniFFI Async Overview  ](https://mozilla.github.io/uniffi-rs/latest/internals/async-overview.html)
    * [ UniFFI Async FFI details  ](https://mozilla.github.io/uniffi-rs/latest/internals/async-ffi.html)
    * [ Rendering Foreign Bindings  ](https://mozilla.github.io/uniffi-rs/latest/internals/rendering_foreign_bindings.html)
    * [ The UniFFI Bindings IR  ](https://mozilla.github.io/uniffi-rs/latest/internals/bindings_ir.html)
    * [ Bindings IR Pipeline  ](https://mozilla.github.io/uniffi-rs/latest/internals/bindings_ir_pipeline.html)
  * [ Upgrading v0.28.x -> v0.29.x  ](https://mozilla.github.io/uniffi-rs/latest/Upgrading.html)


  * [ Using experimental unsigned types  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/gradle.html#using-experimental-unsigned-types)
  * [ Update  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/gradle.html#update)
  * [ JNA dependency  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/gradle.html#jna-dependency)
  * [ Advise on Rust -> Java interop  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/gradle.html#advise-on-rust-java-interop)
  * [ Coroutines dependency  ](https://mozilla.github.io/uniffi-rs/latest/kotlin/gradle.html#coroutines-dependency)


# Integrating with Gradle
It is possible to generate Kotlin bindings at compile time for Kotlin Android projects. We'd like to make a gradle plugin for that, but until then you can add to your `build.gradle` the following:
```
android.libraryVariants.all { variant ->
    def t = tasks.register("generate${variant.name.capitalize()}UniFFIBindings", Exec) {
        workingDir "${project.projectDir}"
        // Runs the bindings generation, note that you must have uniffi-bindgen installed and in your PATH environment variable
        commandLine 'uniffi-bindgen', 'generate', '<PATH TO .udl FILE>', '--language', 'kotlin', '--out-dir', "${buildDir}/generated/source/uniffi/${variant.name}/java"
    }
    variant.javaCompileProvider.get().dependsOn(t)
    def sourceSet = variant.sourceSets.find { it.name == variant.name }
    sourceSet.java.srcDir new File(buildDir, "generated/source/uniffi/${variant.name}/java")
    // XXX: I've been trying to make this work but I can't, so the compiled bindings will show as "regular sources" in Android Studio.
    idea.module.generatedSourceDirs += file("${buildDir}/generated/source/uniffi/${variant.name}/java/uniffi")
}

```

The generated bindings should appear in the project sources in Android Studio.
## Using experimental unsigned types
Unsigned integers in the defined API are translated to their equivalents in the foreign language binding, e.g. `u32` becomes Kotlin's `UInt` type. See [Built-in types](https://mozilla.github.io/uniffi-rs/latest/types/builtin_types.html).
However unsigned integer types are experimental in Kotlin versions prior to 1.5. As such they require explicit annotations to suppress warnings. Uniffi is trying to add these annotations where necessary, but currently misses some places, see [PR #977](https://github.com/mozilla/uniffi-rs/pull/977) for details.
To suppress all warnings for experimental unsigned types add this to your project's `build.gradle` file:
```
allprojects {
   tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {
        kotlinOptions {
            freeCompilerArgs += [
                "-Xuse-experimental=kotlin.ExperimentalUnsignedTypes",
            ]
        }
    }
}

```

> ## Update
> As of [PR #993](https://github.com/mozilla/uniffi-rs/pull/993), the Kotlin backend was refactored, and it became harder to support the `@ExperimentalUnsignedTypes` annotation. Uniffi's Android customers are rapidly moving toward Kotlin 1.5, so adding this compiler arg is no longer necessary.
## JNA dependency
UniFFI relies on [JNA](https://github.com/java-native-access/jna) for the ability to call native methods. JNA 5.12.0 or greater is required.
Set the dependency in your `build.gradle`:
```
dependencies {
    implementation "net.java.dev.jna:jna:5.12.0@aar"
}

```

## Advise on Rust -> Java interop
It's highly recommend to call `AttachCurrentThread` when spawning a Rust thread, and in that thread we need to call Java functions, maybe through UniFFI's foreign interface. Otherwise, [JNA](https://github.com/java-native-access/jna) has to attach and detach a Java thread into the native thread in every function call, which is a heavy operation.
```
static VM: once_cell::sync::OnceCell<jni::JavaVM> = once_cell::sync::OnceCell::new();

// need call this function in java/kotlin first
// Before Rust 1.85 use #[export_name = "Java_com_xxx_xxx"]
// Since Rust 1.85 use #[unsafe(export_name = "Java_com_xxx_xxx")]
#[unsafe(export_name = "Java_com_xxx_xxx")]
pub extern "system" fn java_init(
    env: jni::JNIEnv,
    _class: jni::objects::JClass,
    app: jni::objects::JObject,
) {
    let vm = env.get_java_vm().unwrap();
    _ = VM.set(vm);
}

// take tokio for example, and we need to call uniffi's callback in the tokio worker threads -
tokio::runtime::Builder::new_multi_thread().on_thread_start(|| {
    let vm = VM.get().expect("init java vm");
    vm.attach_current_thread_permanently().unwrap();
}).build().unwrap();

```

To call `Java_com_xxx_xxx` you need to replace `_xxx_xxx` with the right package name and the right class name from where the function will be called. For example:
In Rust:
```
// Rust (see above for before / after Rust 1.85)
#[unsafe(export_name = "Java_com_my_package_MainActivity")]
pub extern "system" fn java_init(
// ...

```

And then in Kotlin:
```
// Kotlin
package my.package

class MainActivity : ComponentActivity() {
    external fun javaInit()

    override fun onCreate(savedInstanceState: Bundle?) {
        // Loads "libmy_library.so" so that it can be called by "external fun" above
        System.loadLibrary("my_library")
        // Calls the Java_com_my_package_MainActivity function in Rust
        javaInit()
    }

```

## Coroutines dependency
UniFFI relies on [kotlinx coroutines core](https://github.com/Kotlin/kotlinx.coroutines) for future and async support. Version 1.6 or greater is required.
Set the dependency in your `build.gradle`:
```
dependencies {
    implementation "org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.4"
}

```

Made with [ Material for MkDocs ](https://squidfunk.github.io/mkdocs-material/)


---


[INIT].... → Crawl4AI 0.8.0 
<!-- SOURCE: https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue+jna+jni -->
[Skip to content](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue+jna+jni#start-of-content)
## Navigation Menu
Toggle navigation
[ ](https://github.com/)
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fmozilla%2Funiffi-rs%2Fissues%3Fq%3Dis%253Aissue%2Bjna%2Bjni)
Appearance settings
  * Platform
    * AI CODE CREATION
      * [ GitHub CopilotWrite better code with AI ](https://github.com/features/copilot)
      * [ GitHub SparkBuild and deploy intelligent apps ](https://github.com/features/spark)
      * [ GitHub ModelsManage and compare prompts ](https://github.com/features/models)
      * [ MCP RegistryNewIntegrate external tools ](https://github.com/mcp)
    * DEVELOPER WORKFLOWS
      * [ ActionsAutomate any workflow ](https://github.com/features/actions)
      * [ CodespacesInstant dev environments ](https://github.com/features/codespaces)
      * [ IssuesPlan and track work ](https://github.com/features/issues)
      * [ Code ReviewManage code changes ](https://github.com/features/code-review)
    * APPLICATION SECURITY
      * [ GitHub Advanced SecurityFind and fix vulnerabilities ](https://github.com/security/advanced-security)
      * [ Code securitySecure your code as you build ](https://github.com/security/advanced-security/code-security)
      * [ Secret protectionStop leaks before they start ](https://github.com/security/advanced-security/secret-protection)
    * EXPLORE
      * [Why GitHub](https://github.com/why-github)
      * [Documentation](https://docs.github.com)
      * [Blog](https://github.blog)
      * [Changelog](https://github.blog/changelog)
      * [Marketplace](https://github.com/marketplace)
[View all features](https://github.com/features)
  * Solutions
    * BY COMPANY SIZE
      * [Enterprises](https://github.com/enterprise)
      * [Small and medium teams](https://github.com/team)
      * [Startups](https://github.com/enterprise/startups)
      * [Nonprofits](https://github.com/solutions/industry/nonprofits)
    * BY USE CASE
      * [App Modernization](https://github.com/solutions/use-case/app-modernization)
      * [DevSecOps](https://github.com/solutions/use-case/devsecops)
      * [DevOps](https://github.com/solutions/use-case/devops)
      * [CI/CD](https://github.com/solutions/use-case/ci-cd)
      * [View all use cases](https://github.com/solutions/use-case)
    * BY INDUSTRY
      * [Healthcare](https://github.com/solutions/industry/healthcare)
      * [Financial services](https://github.com/solutions/industry/financial-services)
      * [Manufacturing](https://github.com/solutions/industry/manufacturing)
      * [Government](https://github.com/solutions/industry/government)
      * [View all industries](https://github.com/solutions/industry)
[View all solutions](https://github.com/solutions)
  * Resources
    * EXPLORE BY TOPIC
      * [AI](https://github.com/resources/articles?topic=ai)
      * [Software Development](https://github.com/resources/articles?topic=software-development)
      * [DevOps](https://github.com/resources/articles?topic=devops)
      * [Security](https://github.com/resources/articles?topic=security)
      * [View all topics](https://github.com/resources/articles)
    * EXPLORE BY TYPE
      * [Customer stories](https://github.com/customer-stories)
      * [Events & webinars](https://github.com/resources/events)
      * [Ebooks & reports](https://github.com/resources/whitepapers)
      * [Business insights](https://github.com/solutions/executive-insights)
      * [GitHub Skills](https://skills.github.com)
    * SUPPORT & SERVICES
      * [Documentation](https://docs.github.com)
      * [Customer support](https://support.github.com)
      * [Community forum](https://github.com/orgs/community/discussions)
      * [Trust center](https://github.com/trust-center)
      * [Partners](https://github.com/partners)
  * Open Source
    * COMMUNITY
      * [ GitHub SponsorsFund open source developers ](https://github.com/sponsors)
    * PROGRAMS
      * [Security Lab](https://securitylab.github.com)
      * [Maintainer Community](https://maintainers.github.com)
      * [Accelerator](https://github.com/accelerator)
      * [Archive Program](https://archiveprogram.github.com)
    * REPOSITORIES
      * [Topics](https://github.com/topics)
      * [Trending](https://github.com/trending)
      * [Collections](https://github.com/collections)
  * Enterprise
    * ENTERPRISE SOLUTIONS
      * [ Enterprise platformAI-powered developer platform ](https://github.com/enterprise)
    * AVAILABLE ADD-ONS
      * [ GitHub Advanced SecurityEnterprise-grade security features ](https://github.com/security/advanced-security)
      * [ Copilot for BusinessEnterprise-grade AI features ](https://github.com/features/copilot/copilot-business)
      * [ Premium SupportEnterprise-grade 24/7 support ](https://github.com/premium-support)
  * [Pricing](https://github.com/pricing)


Search or jump to...
# Search code, repositories, users, issues, pull requests...
Search 
Clear
[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)
#  Provide feedback 
We read every piece of feedback, and take your input very seriously.
Include my email address so I can be contacted
Cancel  Submit feedback 
#  Saved searches 
## Use saved searches to filter your results more quickly
Name
Query
To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). 
Cancel  Create saved search 
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fmozilla%2Funiffi-rs%2Fissues%3Fq%3Dis%253Aissue%2Bjna%2Bjni)
[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fissues%2Findex&source=header-repo&source_repo=mozilla%2Funiffi-rs)
Appearance settings
Resetting focus
You signed in with another tab or window. [Reload](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue+jna+jni) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue+jna+jni) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue+jna+jni) to refresh your session. Dismiss alert
{{ message }}
[ mozilla ](https://github.com/mozilla) / **[uniffi-rs](https://github.com/mozilla/uniffi-rs) ** Public
  * [ ](https://github.com/login?return_to=%2Fmozilla%2Funiffi-rs) You must be signed in to change notification settings
  * [ 297 ](https://github.com/login?return_to=%2Fmozilla%2Funiffi-rs)
  * [ Star  4.3k ](https://github.com/login?return_to=%2Fmozilla%2Funiffi-rs)


  * [ Code ](https://github.com/mozilla/uniffi-rs)
  * [ Issues 254 ](https://github.com/mozilla/uniffi-rs/issues)
  * [ Pull requests 21 ](https://github.com/mozilla/uniffi-rs/pulls)
  * [ Actions ](https://github.com/mozilla/uniffi-rs/actions)
  * [ Security 0 ](https://github.com/mozilla/uniffi-rs/security)
  * [ Insights ](https://github.com/mozilla/uniffi-rs/pulse)


Additional navigation options
  * [ Code  ](https://github.com/mozilla/uniffi-rs)
  * [ Issues  ](https://github.com/mozilla/uniffi-rs/issues)
  * [ Pull requests  ](https://github.com/mozilla/uniffi-rs/pulls)
  * [ Actions  ](https://github.com/mozilla/uniffi-rs/actions)
  * [ Security  ](https://github.com/mozilla/uniffi-rs/security)
  * [ Insights  ](https://github.com/mozilla/uniffi-rs/pulse)


# Issues
Search Issues
is:issuejnajni
is:issue jna jni
Clear filter
Search
[Labels](https://github.com/mozilla/uniffi-rs/labels)[Milestones](https://github.com/mozilla/uniffi-rs/milestones)[New issue](https://github.com/login?return_to=https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue+jna+jni)
## Search results
[Open](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue+jna+jni)[Closed](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue+jna+jni)
Author
Labels
Projects
Milestones
Assignees
Types
More Actions
  * ### [Kotlin pointer-only FFI experiment](https://github.com/mozilla/uniffi-rs/issues/2752)
Status: Open.
#2752 In mozilla/uniffi-rs;
· [bendk](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20author%3Abendk) opened on Dec 11, 2025
  * ### [JNI library for Kotlin/Java/KMP](https://github.com/mozilla/uniffi-rs/issues/2672)
[FFI-1.0](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20label%3AFFI-1.0)
Status: Open.
#2672 In mozilla/uniffi-rs;
· [bendk](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20author%3Abendk) opened on Sep 28, 2025
  * ### [Read metadata from the source code rather than the library](https://github.com/mozilla/uniffi-rs/issues/2670)
[FFI-1.0](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20label%3AFFI-1.0)
Status: Open.
#2670 In mozilla/uniffi-rs;
· [bendk](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20author%3Abendk) opened on Sep 27, 2025
  * ### [Android Kotlin bindings throws "null RustBuffer had non-zero capacity"](https://github.com/mozilla/uniffi-rs/issues/2624)
[binding-kotlin](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20label%3Abinding-kotlin)
Status: Open.
#2624 In mozilla/uniffi-rs;
· [typfel](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20author%3Atypfel) opened on Aug 22, 2025
  * ### [Java NIO's lack of support of long capacity needs to be handled](https://github.com/mozilla/uniffi-rs/issues/2421)
[binding-kotlin](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20label%3Abinding-kotlin)
Status: Open.
#2421 In mozilla/uniffi-rs;
· [paxbun](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20author%3Apaxbun) opened on Jan 30, 2025
  * ### [Inclusion of helpers for language-specific tweaks](https://github.com/mozilla/uniffi-rs/issues/2410)
Status: Open.
#2410 In mozilla/uniffi-rs;
· [dnaka91](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20author%3Adnaka91) opened on Jan 19, 2025
  * ### [Design and agree on a 1.0 FFI](https://github.com/mozilla/uniffi-rs/issues/2155)
[FFI-1.0](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20label%3AFFI-1.0)
Status: Open.
#2155 In mozilla/uniffi-rs;
· [bendk](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20author%3Abendk) opened on Jun 17, 2024
  * ### [Kotlin global reference table overflow](https://github.com/mozilla/uniffi-rs/issues/1979)
Status: Closed (completed).
#1979 In mozilla/uniffi-rs;
·  by [afilini](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20author%3Aafilini) was closed on Feb 7, 2024
  * ### [Support passing platform-specific native object](https://github.com/mozilla/uniffi-rs/issues/1946)
Status: Open.
#1946 In mozilla/uniffi-rs;
· [paxbun](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20author%3Apaxbun) opened on Jan 20, 2024
  * ### [Initializing Android JNI Context](https://github.com/mozilla/uniffi-rs/issues/1778)
Status: Open.
#1778 In mozilla/uniffi-rs;
· [ajoklar](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20author%3Aajoklar) opened on Oct 4, 2023
  * ### [JNA uniffi interop issue](https://github.com/mozilla/uniffi-rs/issues/1411)
Status: Not planned (skipped).
#1411 In mozilla/uniffi-rs;
·  by [IndigoCurnick](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20author%3AIndigoCurnick) was closed on May 2, 2025
  * ### [Let apps re-use our bundled SQLite for their own storage needs](https://github.com/mozilla/uniffi-rs/issues/953)
Status: Closed (completed).
#953 In mozilla/uniffi-rs;
·  by [data-sync-user](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20author%3Adata-sync-user) was closed on Jun 23, 2021
  * ### [Figure out a story for Places observer notifications](https://github.com/mozilla/uniffi-rs/issues/941)
Status: Closed (completed).
#941 In mozilla/uniffi-rs;
·  by [data-sync-user](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20author%3Adata-sync-user) was closed on Jun 22, 2021
  * ### [SYNC-674 ⁃ Use JNI (not JNA) for rc_log and viaduct](https://github.com/mozilla/uniffi-rs/issues/136)
Status: Closed (completed).
#136 In mozilla/uniffi-rs;
·  by [data-sync-user](https://github.com/mozilla/uniffi-rs/issues?q=is%3Aissue%20jna%20jni%20author%3Adata-sync-user) was closed on Jul 30, 2020


## Footer
[ ](https://github.com) © 2026 GitHub, Inc. 
### Footer navigation
  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
  * [Security](https://github.com/security)
  * [Status](https://www.githubstatus.com/)
  * [Community](https://github.community/)
  * [Docs](https://docs.github.com/)
  * [Contact](https://support.github.com?tags=dotcom-footer)
  * Manage cookies 
  * Do not share my personal information 




---


